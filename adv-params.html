<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/apt/adv-params.apt at 2023-07-27
 | Rendered using Apache Maven Fluido Skin 1.11.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <meta name="author" content="Bob Allison" />
    <meta name="date" content="11 November 2005" />
    <title>RPM Maven Plugin &#x2013; Maven RPM Plugin - Advanced Parameters</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.11.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.11.1.min.js"></script>

    <!-- Matomo -->
    <script>
        var _paq = window._paq = window._paq || [];
                _paq.push(['disableCookies']);
                    _paq.push(['trackPageView']);
                    _paq.push(['enableLinkTracking']);
        
        (function() {
            var u="https://analytics.apache.org/";
            _paq.push(['setTrackerUrl', u+'/matomo.php']);
            _paq.push(['setSiteId', '18']);
            var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
            g.async=true; g.src=u+'/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
    </script>
    <!-- End Matomo Code -->
    <style>.github-fork-ribbon:before { background-color: gray; }</style>
  </head>
  <body class="topBarDisabled">
    <a class="github-fork-ribbon right-top" href="https://github.com/mojohaus/rpm-maven-plugin" data-ribbon="Fork me on GitHub" title="Fork me on GitHub">Fork me on GitHub</a>
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href="../../" id="bannerLeft"><img src="../../images/mojo_logo.png"  alt="MojoHaus" style="" /></a></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
      <li class=""><a href="../../" title="MojoHaus">MojoHaus</a><span class="divider">/</span></li>
      <li class=""><a href="../../mojo-parent" title="MojoHaus Parent">MojoHaus Parent</a><span class="divider">/</span></li>
      <li class=""><a href="index.html" title="RPM Maven Plugin">RPM Maven Plugin</a><span class="divider">/</span></li>
    <li class="active ">Maven RPM Plugin - Advanced Parameters <a href="https://github.com/mojohaus/rpm-maven-plugin/src/site/apt/adv-params.apt"><img src="./images/accessories-text-editor.png" title="Edit" /></a></li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2023-07-27</li>
          <li id="projectVersion" class="pull-right"><span class="divider">|</span>Version: 2.3.0</li>
        <li class="pull-right"><a href="https://maven.apache.org/" class="externalLink" title="Maven">Maven</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li><a href="plugin-info.html" title="Goals"><span class="none"></span>Goals</a></li>
    <li><a href="usage.html" title="Usage"><span class="none"></span>Usage</a></li>
    <li><a href="faq.html" title="FAQ"><span class="none"></span>FAQ</a></li>
    <li><a href="pom.html" title="Project Settings"><span class="icon-chevron-right"></span>Project Settings</a></li>
    <li><a href="params.html" title="Parameters"><span class="icon-chevron-down"></span>Parameters</a>
     <ul class="nav nav-list">
      <li><a href="ident-params.html" title="Identification Parameters"><span class="icon-chevron-down"></span>Identification Parameters</a>
       <ul class="nav nav-list">
        <li><a href="ident-params.html#name" title="name"><span class="none"></span>name</a></li>
        <li><a href="ident-params.html#license" title="license"><span class="none"></span>license</a></li>
        <li><a href="ident-params.html#distribution" title="distribution"><span class="none"></span>distribution</a></li>
        <li><a href="ident-params.html#group" title="group"><span class="none"></span>group</a></li>
        <li><a href="ident-params.html#icon" title="icon"><span class="none"></span>icon</a></li>
        <li><a href="ident-params.html#needarch" title="needarch"><span class="none"></span>needarch</a></li>
        <li><a href="ident-params.html#packager" title="packager"><span class="none"></span>packager</a></li>
        <li><a href="ident-params.html#release" title="release**"><span class="none"></span>release**</a></li>
        <li><a href="ident-params.html#version" title="version"><span class="none"></span>version</a></li>
        <li><a href="ident-params.html#changelogFile" title="changelogFile"><span class="none"></span>changelogFile</a></li>
        <li><a href="ident-params.html#repackJars" title="repackJars"><span class="none"></span>repackJars</a></li>
        <li><a href="ident-params.html#targetOS" title="targetOS"><span class="none"></span>targetOS</a></li>
        <li><a href="ident-params.html#targetVendor" title="targetVendor"><span class="none"></span>targetVendor</a></li>
       </ul></li>
      <li><a href="op-params.html" title="Operation Parameters"><span class="icon-chevron-down"></span>Operation Parameters</a>
       <ul class="nav nav-list">
        <li><a href="op-params.html#workarea" title="workarea"><span class="none"></span>workarea</a></li>
        <li><a href="op-params.html#defineStatements" title="defineStatements"><span class="none"></span>defineStatements</a></li>
       </ul></li>
      <li><a href="map-params.html" title="Mapping Parameters"><span class="icon-chevron-down"></span>Mapping Parameters</a>
       <ul class="nav nav-list">
        <li><a href="map-params.html#artifact" title="artifact"><span class="none"></span>artifact</a></li>
        <li><a href="map-params.html#configuration" title="configuration"><span class="none"></span>configuration</a></li>
        <li><a href="map-params.html#dependency" title="dependency"><span class="none"></span>dependency</a></li>
        <li><a href="map-params.html#directory" title="directory**"><span class="none"></span>directory**</a></li>
        <li><a href="map-params.html#documentation" title="documentation"><span class="none"></span>documentation</a></li>
        <li><a href="map-params.html#filemode" title="filemode*"><span class="none"></span>filemode*</a></li>
        <li><a href="map-params.html#groupname" title="groupname*"><span class="none"></span>groupname*</a></li>
        <li><a href="map-params.html#directoryIncluded" title="directoryIncluded"><span class="none"></span>directoryIncluded</a></li>
        <li><a href="map-params.html#recurseDirectories" title="recurseDirectories"><span class="none"></span>recurseDirectories</a></li>
        <li><a href="map-params.html#sources" title="sources"><span class="none"></span>sources</a></li>
        <li><a href="map-params.html#username" title="username*"><span class="none"></span>username*</a></li>
       </ul></li>
      <li><a href="source-params.html" title="Source Parameters"><span class="icon-chevron-down"></span>Source Parameters</a>
       <ul class="nav nav-list">
        <li><a href="source-params.html#location" title="location**"><span class="none"></span>location**</a></li>
        <li><a href="source-params.html#noDefaultExcludes" title="noDefaultExcludes"><span class="none"></span>noDefaultExcludes</a></li>
        <li><a href="source-params.html#includes" title="includes"><span class="none"></span>includes</a></li>
        <li><a href="source-params.html#excludes" title="excludes"><span class="none"></span>excludes</a></li>
        <li><a href="source-params.html#softlinkSource" title="softlinkSource"><span class="none"></span>softlinkSource</a></li>
       </ul></li>
      <li class="active"><a><span class="icon-chevron-down"></span>Advanced Parameters</a>
       <ul class="nav nav-list">
        <li><a href="adv-params.html#Dependency" title="RPM Dependencies"><span class="none"></span>RPM Dependencies</a></li>
        <li><a href="adv-params.html#Relocation" title="Relocation"><span class="none"></span>Relocation</a></li>
        <li><a href="adv-params.html#Scripts" title="Scripts"><span class="none"></span>Scripts</a></li>
        <li><a href="adv-params.html#Triggers" title="Triggers"><span class="none"></span>Triggers</a></li>
        <li><a href="adv-params.html#Signatures" title="Signatures"><span class="none"></span>Signatures</a></li>
       </ul></li>
     </ul></li>
   <li class="nav-header">Examples</li>
    <li><a href="example1.html" title="Sample"><span class="none"></span>Sample</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<section>
<h2><a name="Advanced_Parameters"></a>Advanced Parameters</h2>
<p>The parameters described in this page are parameters which enable advanced RPM features. Before using these parameters, it is <b>highly</b> recommended that you read <a class="externalLink" href="http://www.rpm.org/max-rpm/">Maximum RPM</a> to gain an understanding of what these parameters do.</p><section>
<h3><a name="RPM_Package_Dependency_Management"></a>RPM Package <a name="Dependency">Dependency</a> Management</h3>
<p><b>These parameters relate to the dependencies between RPM packages, not to the dependencies required to build the RPM package contents.</b></p>
<p>There are six RPM spec file tags related to dependency management:</p>
<ul>
<li><code>provides</code> defines a <i>virtual package</i> which is provided by the package being built</li>
<li><code>requires</code> identifies a package that is required to be installed for the package being built to operate correctly</li>
<li><code>requiresPre</code> identifies a package that is required to be installed for the pre-installation scriptlet of the package being built to operate correctly. Packages that are listed here are installed before the pre-installation scriptlet of the package being built is run. Corresponds to the <code>Requires(pre)</code> tag in the spec file.</li>
<li><code>requiresPost</code> identifies a package that is required to be installed for the post-installation scriptlet of the package being built to operate correctly. Packages that are listed here are installed before the post-installation scriptlet of the package being built is run. Corresponds to the <code>Requires(post)</code> tag in the spec file.</li>
<li><code>requiresPreun</code> identifies a package that is required to be installed for the pre-removal scriptlet of the package being built to operate correctly. Corresponds to the <code>Requires(preun)</code> tag in the spec file.</li>
<li><code>conflicts</code> identifies a package which must not be installed if the package being built is installed</li></ul>
<p>All of these tags can appear multiple times in the spec file. To configure these tags in the plugin configuration, specify an element for each instance of the tag in the spec file; the content of the element is the exact text to be placed in the spec file. Please be careful to ensure that version comparison specifications such as <code> &lt; </code> and <code> &gt; </code> are properly specified in the XML file. Here is an example:</p>
<div class="source"><pre class="prettyprint">&lt;provides&gt;
  &lt;provide&gt;dump&lt;/provide&gt;
&lt;/provides&gt;
&lt;requires&gt;
  &lt;require&gt;trash-truck &amp;gt; 1.0&lt;/require&gt;
&lt;/requires&gt;
&lt;requires&gt;
  &lt;require&gt;road&lt;/require&gt;
&lt;/requires&gt;
&lt;requiresPre&gt;
  &lt;require&gt;excavator&lt;/require&gt;
&lt;/requiresPre&gt;
&lt;requiresPost&gt;
  &lt;require&gt;bulldozer&lt;/require&gt;
&lt;/requiresPost&gt;
&lt;requiresPreun&gt;
  &lt;require&gt;environment-util = 2.0&lt;/require&gt;
&lt;/requiresPreun&gt;
&lt;conflicts&gt;
  &lt;conflict&gt;incinerator&lt;/conflict&gt;
&lt;/conflicts&gt;</pre></div></section><section>
<h3><a name="RPM_Build_Dependency_Management"></a>RPM Build Dependency Management</h3>
<p><b>These parameters relate to the dependencies required to build the RPM package contents.</b></p>
<p>There is one RPM spec file tag related to build dependency management:</p>
<ul>
<li><code>buildRequires</code> identifies a package that is required to be installed for the package being built to build correctly; i.e. it provides some tools needed during the building of the package, or some RPM macros that must be present when adding the scriptlets into the RPM package.</li></ul>
<p>This tag can appear multiple times in the spec file. To configure this tag in the plugin configuration, specify an element for each instance of the tag in the spec file; the content of the element is the exact text to be placed in the spec file. Please be careful to ensure that version comparison specifications such as <code> &lt; </code> and <code> &gt; </code> are properly specified in the XML file. Here is an example:</p>
<div class="source"><pre class="prettyprint">&lt;buildRequires&gt;
  &lt;buildRequire&gt;ruby &amp;gt; 1.8&lt;/buildRequire&gt;
&lt;/buildRequires&gt;</pre></div></section><section>
<h3><a name="Relocation">Relocation</a></h3>
<p>If you specify the <code>prefix/prefixes</code> parameter to the RPM plugin, you can create a package that can be installed in a user-specified location. Before doing this, read and understand Maximum RPM <a class="externalLink" href="http://www.rpm.org/max-rpm/ch-rpm-reloc.html">Chapter 15</a> since there are a number of kinks and quirks that must be addressed.</p></section><section>
<h3><a name="Scripts">Scripts</a></h3>
<p>There are a number of scripts that can be included in the RPM package which are executed as part of the installation, removal, or verification of the package.</p>
<p>Each of the scripts can be configured as a <a href="./apidocs/org/codehaus/mojo/rpm/Scriptlet.html">Scriptlet</a>, which allows the content of the script to be provided either as a String or File. If both parameters are specified for a script, the external file will be ignored. Before writing scripts for RPM packages, understand the <a class="externalLink" href="http://www.rpm.org/max-rpm/s1-rpm-inside-scripts.html">script docs</a> in Maximum RPM since the operation of the scripts must be done correctly or major problems can occur while installing or removing the package.</p>
<p>Script files can be filtered by setting <code>&lt;filter</code>&gt; to true while inline scripts can be filtered together with the pom.</p>
<p>Here are examples of passing the content of the script in the pom (using <code>&lt;script</code>&gt;) and in a file (using <code>&lt;scriptFile</code>&gt;) and enabling filtering for preinstall.sh script:</p>
<div class="source"><pre class="prettyprint">&lt;prepareScriptlet&gt;
  &lt;script&gt;echo &quot;preparing ${project.name}&quot;&lt;/script&gt;
&lt;/prepareScriptlet&gt;
&lt;preinstallScriptlet&gt;
  &lt;scriptFile&gt;/src/main/bin/preinstall.sh&lt;/scriptFile&gt;
  &lt;fileEncoding&gt;utf-8&lt;/fileEncoding&gt;
  &lt;filter&gt;true&lt;/filter&gt;
&lt;/preinstallScriptlet&gt;</pre></div><section>
<h4><a name="prepareScriptlet"></a><code>prepareScriptlet</code></h4>
<p>This script specifies commands to prepare the build. It corresponds to the <code>%prep</code> tag in the spec file.</p></section><section>
<h4><a name="preinstallScriptlet"></a><code>preinstallScriptlet</code></h4>
<p>This script is run before the package is installed. It corresponds to the <code>%pre</code> tag in the spec file.</p></section><section>
<h4><a name="installScriptlet"></a><code>installScriptlet</code></h4>
<p>This script is run as a part of installing the package. It corresponds to the <code>%install</code> tag in the spec file.</p></section><section>
<h4><a name="postinstallScriptlet"></a><code>postinstallScriptlet</code></h4>
<p>This script is run after the package is installed. It corresponds to the <code>%post</code> tag in the spec file.</p></section><section>
<h4><a name="preremoveScriptlet"></a><code>preremoveScriptlet</code></h4>
<p>This script is run before the package is removed. It corresponds to the <code>%preun</code> tag in the spec file.</p></section><section>
<h4><a name="postremoveScriptlet"></a><code>postremoveScriptlet</code></h4>
<p>This script is run after the package is removed. It corresponds to the <code>%postun</code> tag in the spec file.</p></section><section>
<h4><a name="verifyScriptlet"></a><code>verifyScriptlet</code></h4>
<p>This script is run when the package is being verified. It corresponds to the <code>%verifyScript</code> tag in the spec file.</p></section><section>
<h4><a name="cleanScriptlet"></a><code>cleanScriptlet</code></h4>
<p>This script is run after the package is installed to clean up installation files. It corresponds to the <code>%clean</code> tag in the spec file.</p></section><section>
<h4><a name="pretransScriptlet"></a><code>pretransScriptlet</code></h4>
<p>This script is run at the beginning of the transaction. It corresponds to the <code>%pretrans</code> tag in the spec file.</p></section><section>
<h4><a name="posttransScriptlet"></a><code>posttransScriptlet</code></h4>
<p>This script is run at the end of the transaction. It corresponds to the <code>%posttrans</code> tag in the spec file.</p></section></section><section>
<h3><a name="Triggers">Triggers</a></h3>
<p>Triggers are scripts which can be included in an RPM package to execute based on the action of other packages in a system. Before writing triggers for RPM packages, understand the <a class="externalLink" href="http://rpm.org/api/4.4.2.2/triggers.html">triggers</a> in the RPM documentation since the operation of the scripts must be done correctly or major problems can occur while installing or removing other packages.</p></section><section>
<h3><a name="Signatures">Signatures</a></h3>
<p>RPM packages may be signed using GPG or PGP. Currently the plugin only supports generating GPG signatures.</p><section>
<h4><a name="keyname"></a><code>keyname</code></h4>
<p>This parameter sets the name of the GPG key used to sign the package, and also turns on the signature. Setting this parameter is equivalent to defining the <code>%_gpg_name</code> macro and adding the <code>--sign</code> option to <code>rpmbuild</code>.</p></section><section>
<h4><a name="keyPassphrase"></a><code>keyPassphrase</code></h4>
<p>This parameter sets the passphrase for the key to sign the rpm. The use of this attribute requires <a class="externalLink" href="http://expect.nist.gov/">expect</a> to be available on the PATH.</p></section></section></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2005&#x2013;2023
<a href="https://www.mojohaus.org">MojoHaus</a>
</p>
        </div>
      </div>
    </footer>
<script>
	if(anchors) {
	  anchors.add();
	}
</script>
  </body>
</html>