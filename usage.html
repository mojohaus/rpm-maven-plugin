<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/apt/usage.apt.vm at 2023-07-27
 | Rendered using Apache Maven Fluido Skin 1.11.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <meta name="author" content="Bob Allison" />
    <meta name="date" content="15 January 2006" />
    <title>RPM Maven Plugin &#x2013; Maven RPM Plugin - Usage Scenarios</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.11.1.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.11.1.min.js"></script>

    <!-- Matomo -->
    <script>
        var _paq = window._paq = window._paq || [];
                _paq.push(['disableCookies']);
                    _paq.push(['trackPageView']);
                    _paq.push(['enableLinkTracking']);
        
        (function() {
            var u="https://analytics.apache.org/";
            _paq.push(['setTrackerUrl', u+'/matomo.php']);
            _paq.push(['setSiteId', '18']);
            var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
            g.async=true; g.src=u+'/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
    </script>
    <!-- End Matomo Code -->
    <style>.github-fork-ribbon:before { background-color: gray; }</style>
  </head>
  <body class="topBarDisabled">
    <a class="github-fork-ribbon right-top" href="https://github.com/mojohaus/rpm-maven-plugin" data-ribbon="Fork me on GitHub" title="Fork me on GitHub">Fork me on GitHub</a>
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href="../../" id="bannerLeft"><img src="../../images/mojo_logo.png"  alt="MojoHaus" style="" /></a></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
      <li class=""><a href="../../" title="MojoHaus">MojoHaus</a><span class="divider">/</span></li>
      <li class=""><a href="../../mojo-parent" title="MojoHaus Parent">MojoHaus Parent</a><span class="divider">/</span></li>
      <li class=""><a href="index.html" title="RPM Maven Plugin">RPM Maven Plugin</a><span class="divider">/</span></li>
    <li class="active ">Maven RPM Plugin - Usage Scenarios <a href="https://github.com/mojohaus/rpm-maven-plugin/src/site/apt/usage.apt.vm"><img src="./images/accessories-text-editor.png" title="Edit" /></a></li>
        <li id="publishDate" class="pull-right"><span class="divider">|</span> Last Published: 2023-07-27</li>
          <li id="projectVersion" class="pull-right"><span class="divider">|</span>Version: 2.3.0</li>
        <li class="pull-right"><a href="https://maven.apache.org/" class="externalLink" title="Maven">Maven</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li><a href="index.html" title="Introduction"><span class="none"></span>Introduction</a></li>
    <li><a href="plugin-info.html" title="Goals"><span class="none"></span>Goals</a></li>
    <li class="active"><a><span class="none"></span>Usage</a></li>
    <li><a href="faq.html" title="FAQ"><span class="none"></span>FAQ</a></li>
    <li><a href="pom.html" title="Project Settings"><span class="icon-chevron-right"></span>Project Settings</a></li>
    <li><a href="params.html" title="Parameters"><span class="icon-chevron-right"></span>Parameters</a></li>
   <li class="nav-header">Examples</li>
    <li><a href="example1.html" title="Sample"><span class="none"></span>Sample</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html" title="Project Information"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html" title="Project Reports"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<section>
<h2><a name="Usage_Scenarios"></a>Usage Scenarios</h2>
<p>Listed below are the various scenarios where the RPM plugin can be used along with the proper way to configure the project(s) involved.</p></section><section>
<h2><a name="RPM_on_Demand"></a>RPM on Demand</h2>
<p>In this scenario, an RPM is generated from the project on demand by executing the goal &quot;<code>rpm:rpm</code>&quot; within a project. The project itself may be configured to produce any sort of packaging, since the RPM is not the primary artifact produced by the project.</p>
<p>If you want the project's artifacts packaged in the RPM, you must generate the RPM as a side effect of the standard lifecycle.</p>
<p>Things which do not work as I envision the 1.0 release working:</p>
<ul>
<li>If this goal is run on a project with modules, it will run the &quot;<code>rpm:rpm</code>&quot; goal on each module, rather than packaging the modules into a single RPM.</li></ul></section><section>
<h2><a name="RPM_as_Side_Effect"></a>RPM as Side Effect</h2>
<p>In this scenario, an RPM is generated from the project whenever the project is packaged. This must be done whenever the project's primary artifact is intended to be part of the RPM package but can be done anytime. To set up this configuration, include the following lines in the plugin definition in the project's POM file (see the <a href="./example1.html">sample configuration</a> for an example of this):</p>
<div class="source"><pre class="prettyprint">&lt;executions&gt;
  &lt;execution&gt;
    &lt;id&gt;generate-rpm&lt;/id&gt;
    &lt;goals&gt;
      &lt;goal&gt;rpm&lt;/goal&gt;
    &lt;/goals&gt;
  &lt;/execution&gt;
&lt;/executions&gt;</pre></div></section><section>
<h2><a name="RPM_as_Secondary_Artifact"></a>RPM as Secondary Artifact</h2>
<p>In this scenario, the rpm is not the primary artifact, but will be deployed as a secondary artifact.</p>
<div class="source"><pre class="prettyprint">&lt;executions&gt;
  &lt;execution&gt;
    &lt;id&gt;attach-rpm&lt;/id&gt;
    &lt;goals&gt;
      &lt;goal&gt;attached-rpm&lt;/goal&gt;
    &lt;/goals&gt;
  &lt;/execution&gt;
&lt;/executions&gt;</pre></div></section><section>
<h2><a name="RPM_as_Primary_Artifact"></a>RPM as Primary Artifact</h2>
<p>In this scenario, the RPM is the primary artifact of the project and is created by executing the phase &quot;<code>package</code>&quot; within the project. If properly configured, this allows the user to execute &quot;<code>mvn package</code>&quot; on a top-level project (which has the items to build and the RPM project as modules) and have Maven package the items to build into jars, wars, ears, etc. and them assemble the RPM of those items for distribution.</p>
<p>The packaging value should be set to &quot;<code>rpm</code>&quot;.</p>
<div class="source"><pre class="prettyprint">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd &quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    ...
    &lt;packaging&gt;rpm&lt;/packaging&gt;
    ...
&lt;/project&gt;</pre></div>
<p>The extensions tag for this plugin should be marked true.</p>
<div class="source"><pre class="prettyprint">    &lt;build&gt;
      &lt;plugins&gt;
        &lt;plugin&gt;
          &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
          &lt;artifactId&gt;rpm-maven-plugin&lt;/artifactId&gt;
          &lt;version&gt;2.3.0&lt;/version&gt;
          &lt;extensions&gt;true&lt;/extensions&gt;
           ...
        &lt;/plugin&gt;
      &lt;/plugins&gt;
    &lt;/build&gt;</pre></div></section><section>
<h2><a name="Configure_GPG_passphrase_under_settings.xml"></a>Configure GPG passphrase under settings.xml</h2>
<p>GPG passphrase can be configured under local settings.xml either in clear or <a class="externalLink" href="http://maven.apache.org/guides/mini/guide-encryption.html">encrypted</a> text.</p>
<div class="source"><pre class="prettyprint">&lt;settings&gt;
  [...]
  &lt;servers&gt;
    [...]
    &lt;server&gt;
      &lt;id&gt;gpg.passphrase&lt;/id&gt;
      &lt;passphrase&gt;clear or encrypted text&lt;/passphrase&gt;
    &lt;/server&gt;
  &lt;/servers&gt;
&lt;/settings&gt;</pre></div></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2005&#x2013;2023
<a href="https://www.mojohaus.org">MojoHaus</a>
</p>
        </div>
      </div>
    </footer>
<script>
	if(anchors) {
	  anchors.add();
	}
</script>
  </body>
</html>